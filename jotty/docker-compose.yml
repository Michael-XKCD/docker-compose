version: "3.8"

services:
  jotty:
    image: ghcr.io/fccview/jotty:${JOTTY_VERSION}
    container_name: jotty
    restart: unless-stopped
    ports:
      - "1122:3000"
    volumes:
      - ${APPDATA_PATH}/jotty/data:/app/data:rw
      - ${APPDATA_PATH}/jotty/config:/app/config:rw
      - ${APPDATA_PATH}/jotty/cache:/app/.next/cache:rw

    environment:
      - NODE_ENV=production
      - TZ=America/Los_Angeles

      # ---- Optional OIDC/SSO (Authentik) ----
      # - SSO_MODE=oidc
      # - OIDC_ISSUER=https://YOUR_SSO_HOST/issuer
      # - OIDC_CLIENT_ID=your_client_id
      # - OIDC_CLIENT_SECRET=your_client_secret
      # - APP_URL=https://your-jotty-domain.com

    labels:
      net.unraid.docker.webui: "http://[IP]:[PORT:1122]"
      net.unraid.docker.icon: "https://cdn.jsdelivr.net/gh/homarr-labs/dashboard-icons/png/jotty.png"